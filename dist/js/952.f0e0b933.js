"use strict";(self["webpackChunkreallapp"]=self["webpackChunkreallapp"]||[]).push([[952,345],{2345:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var i=o(3396),s=o(9242),a=o(7139);const r={key:0,open:""},l={key:0},n=(0,i.Uk)("Close");function d(e,t,o,d,u,c){const m=(0,i.up)("base-button");return(0,i.wg)(),(0,i.j4)(i.lR,{to:"body"},[o.show?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>c.tryClose&&c.tryClose(...e)),class:"backdrop"})):(0,i.kq)("",!0),(0,i.Wm)(s.uT,{name:"dialog"},{default:(0,i.w5)((()=>[o.show?((0,i.wg)(),(0,i.iD)("dialog",r,[(0,i._)("header",null,[(0,i.WI)(e.$slots,"header",{},(()=>[(0,i._)("h2",null,(0,a.zw)(o.title),1)]),!0)]),(0,i._)("section",null,[(0,i.WI)(e.$slots,"default",{},void 0,!0)]),o.fixed?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("menu",l,[(0,i.WI)(e.$slots,"actions",{},(()=>[(0,i.Wm)(m,{onClick:c.tryClose},{default:(0,i.w5)((()=>[n])),_:1},8,["onClick"])]),!0)]))])):(0,i.kq)("",!0)])),_:3})])}var u={props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1}},emits:["close"],methods:{tryClose(){this.fixed||this.$emit("close")}}},c=o(89);const m=(0,c.Z)(u,[["render",d],["__scopeId","data-v-b7672b7c"]]);var p=m},3952:function(e,t,o){o.r(t),o.d(t,{default:function(){return g}});var i=o(3396),s=o(7139),a=o(9242);const r=e=>((0,i.dD)("data-v-ce736eba"),e=e(),(0,i.Cn)(),e),l={class:"form-control"},n=r((()=>(0,i._)("label",{for:"email"},"E-Mail",-1))),d={class:"form-control"},u=r((()=>(0,i._)("label",{for:"password"},"Password",-1))),c={key:0};function m(e,t,o,r,m,p){const h=(0,i.up)("base-dialog"),w=(0,i.up)("base-spinner"),f=(0,i.up)("base-button"),g=(0,i.up)("base-card");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(h,{show:!!m.error,title:"An error occured",onClose:p.handleError},{default:(0,i.w5)((()=>[(0,i._)("p",null,(0,s.zw)(m.error),1)])),_:1},8,["show","onClose"]),(0,i.Wm)(h,{show:m.isLoading,title:"Authenticating...",fixed:""},{default:(0,i.w5)((()=>[(0,i.Wm)(w)])),_:1},8,["show"]),(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>p.submitForm&&p.submitForm(...e)),["prevent"]))},[(0,i._)("div",l,[n,(0,i.wy)((0,i._)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>m.email=e)},null,512),[[a.nr,m.email,void 0,{trim:!0}]])]),(0,i._)("div",d,[u,(0,i.wy)((0,i._)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>m.password=e)},null,512),[[a.nr,m.password,void 0,{trim:!0}]])]),m.formIsValid?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",c," Please enter a vaild email and password (must be at least 6 characters long). ")),(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(p.submitButtonCaption),1)])),_:1}),(0,i.Wm)(f,{type:"button",mode:"flat",onClick:p.switchAuthMode},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(p.switchModeButtonCaption),1)])),_:1},8,["onClick"])],32)])),_:1})])}o(6699);var p=o(2345),h={components:{BaseDialog:p["default"]},data(){return{email:"",password:"",formIsValid:!0,mode:"login",isLoading:!1,error:null}},computed:{submitButtonCaption(){return"login"===this.mode?"Login":"Signup"},switchModeButtonCaption(){return"login"===this.mode?"Signup instead":"Login instead"}},methods:{async submitForm(){if(this.formIsValid=!0,""===this.email||!this.email.includes("@")||this.password.length<6)return void(this.formIsValid=!1);this.isLoading=!0;const e={email:this.email,password:this.password};try{"login"===this.mode?await this.$store.dispatch("login",e):await this.$store.dispatch("signup",e);const t="/"+(this.$route.query.redirect||"coaches");this.$router.replace(t)}catch(t){this.error=t.message||"Faild to authenticate, try later."}this.isLoading=!1},switchAuthMode(){"login"===this.mode?this.mode="signup":this.mode="login"},handleError(){this.error=null}}},w=o(89);const f=(0,w.Z)(h,[["render",m],["__scopeId","data-v-ce736eba"]]);var g=f}}]);
//# sourceMappingURL=952.f0e0b933.js.map